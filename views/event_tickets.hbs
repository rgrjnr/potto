<h1>Potto | Meus eventos</h1>

<a href="/account/events/create">Criar evento</a> |  <a href="/account/events">Mostrar todos</a>

<div id="events">
    <script type="text/template" id="event-item">
        <div class="event" id="{slug}" index="{index}">
            <h2>{title}</h2>
            <a href="/account/events/edit/{slug}">Editar</a> | 
            <a href="/account/events/{id}/tickets">Ver ingressos disponíveis</a>
    </script>
</div>

           product: {
            name: $('#name').val(),
            description: $('#description').val(),
            price: $('#price').val(),
            event: $('#event').val(),
            quantity: $('#quantity').val()
        }


<h3>Criar Ingressos</h3>

<form  class="prevent-default">
    <label>
        Nome
        <input type="text" name="name" id="name" placeholder="Nome do evento" value="" required><br>
    </label>
    <label>
        Descrição
        <input type="text" name="description" id="description"><br>
    </label>
    <label>
        Valor
        <input type="number" name="price" id="price" value="0"><br>
    </label>
    <label>
        Ingressos disponíveis
        <input type="number" name="quantity" id="quantity" value="0" required><br>
    </label>
    <label>
        <input type="hidden" name="event" id="event"><br>
    </label>
    <input type="submit">
</form>


</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="/index.js"></script>
<script>
    
$(document).on("submit", "form", function(e){
    e.preventDefault();
    $('#event').val(window.location.pathname.split('/')[3]),
    postProduct();
    return false;
});

const render = async function () {
    var template = document.getElementById('event-item');
    var templateHtml = template.innerHTML;
    var listHtml = "";
    const slug = window.location.pathname.split('/')[3];
    const event = await getEvents(slug);
        listHtml += templateHtml.replace(/{title}/g, event.event.title)
                                .replace(/{slug}/g, event.event.slug)
                                .replace(/{id}/g, event.event._id);
                    
    let id = event.event._id;

    $('#event').val(id);

    console.log(event);
    document.getElementById("events").innerHTML = listHtml;




    template = document.getElementById('invite-item');
    templateHtml = template.innerHTML;
    listHtml = "";

    const invites = await getInvites(id);
    await invites.forEach(function (invite, index) {
        listHtml += templateHtml.replace(/{email}/g, invite.invited_user)
            .replace(/{accepted}/g, invite.accepted)
    })
     document.getElementById("invites").innerHTML = listHtml;
}
render();*/

</script>
